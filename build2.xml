<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project name="pos" default="junitReport" basedir=".">

    <property name="src" value="./src"/>
    <property name="bin" value="./bin"/>
    <property name="lib" value="./libs"/>
    <property name="test.dir" value="./src/"/>
    <property name="report" value="./report" />

<path id="pos.classpath">
              <pathelement location="${bin}" />
              <fileset dir="${lib}">
                     <include name="**/*.jar" />
              </fileset>
       </path>

     <target name="clean">
        <delete dir="${bin}"/>
    </target>

    <target name="compile" depends="clean">
        <mkdir dir="${bin}"/>
        <javac srcdir="${src}" fork="true" destdir="${bin}" includeantruntime="false" debug="true" debuglevel="lines,vars,source">
       <classpath refid="pos.classpath"/>
</javac>
    </target>

    <target name="exec" depends="compile" description="Launch the test suite">
              <echo message="----------Launch the test suite----------" />
              <delete dir="${report}" />
              <mkdir dir="${report}" />
              <mkdir dir="${report}/xml" />
              <junit fork="yes" printsummary="withOutAndErr" haltonfailure="no">
                     <classpath refid="pos.classpath" />
                     <formatter type="xml" />
                     <batchtest fork="yes" todir="${report}/xml">                        
                           <fileset dir="${src}" includes="**/TestSuite.java" />
                     </batchtest>
              </junit>
       </target>
       <target name="junitReport" depends="exec" description="Generate the test report">
              <echo message="----------Generate the test report----------" />
              <junitreport todir="${report}">
                     <fileset dir="${report}/xml">
                           <include name="TEST-*.xml" />
                     </fileset>
                     <report format="frames" todir="${report}/html">
                           <param name="TITLE" expression="Selenium_Learning_Report" />
                     </report>
              </junitreport>
      </target>

</project>
